<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Report ‚Ä¢ 6 tests</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        /* Modern Color Palette */
        :root {
            --bg-color: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --card-bg: #ffffff;
            --surface-muted: #f1f5f9;
            --primary-color: #3b82f6;
            color-scheme: light dark;

            /* Status Colors */
            --passed-bg: #dcfce7;
            --passed-text: #166534;
            --failed-bg: #fee2e2;
            --failed-text: #991b1b;
            --skipped-bg: #fef9c3;
            --skipped-text: #854d0e;
            --xfailed-bg: #ffedd5;
            --xfailed-text: #9a3412;
            --xpassed-bg: #f3e8ff;
            --xpassed-text: #6b21a8;
            --error-bg: #fee2e2;
            --error-text: #991b1b;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        header {
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .meta {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Summary Grid */
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: transform 0.2s;
        }

        .summary-card:hover {
            transform: translateY(-2px);
        }

        .summary-card .count {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .summary-card .label {
            text-transform: uppercase;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        /* Status Colors for Summary */
        .summary-card.passed .count {
            color: var(--passed-text);
        }

        .summary-card.failed .count {
            color: var(--failed-text);
        }

        .summary-card.skipped .count {
            color: var(--skipped-text);
        }

        .summary-card.xfailed .count {
            color: var(--xfailed-text);
        }

        .summary-card.xpassed .count {
            color: var(--xpassed-text);
        }

        .summary-card.coverage .count {
            color: var(--primary-color);
        }

        /* Filters */
        .filters {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .filter-input {
            flex: 1;
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .filter-input::placeholder {
            color: var(--text-secondary);
        }

        .filter-statuses {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            border: 1px solid var(--border-color);
            background: var(--surface-muted);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .filter-chip input {
            margin: 0;
        }

        .filter-chip.passed {
            background: var(--passed-bg);
            color: var(--passed-text);
        }

        .filter-chip.failed {
            background: var(--failed-bg);
            color: var(--failed-text);
        }

        .filter-chip.skipped {
            background: var(--skipped-bg);
            color: var(--skipped-text);
        }

        .filter-chip.xfailed {
            background: var(--xfailed-bg);
            color: var(--xfailed-text);
        }

        .filter-chip.xpassed {
            background: var(--xpassed-bg);
            color: var(--xpassed-text);
        }

        .filter-chip.error {
            background: var(--error-bg);
            color: var(--error-text);
        }

        /* Test List */
        .test-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .test-row {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .test-header {
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            background: var(--card-bg);
        }

        .test-header:hover {
            background: var(--surface-muted);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-passed {
            background: var(--passed-bg);
            color: var(--passed-text);
        }

        .status-failed {
            background: var(--failed-bg);
            color: var(--failed-text);
        }

        .status-skipped {
            background: var(--skipped-bg);
            color: var(--skipped-text);
        }

        .status-xfailed {
            background: var(--xfailed-bg);
            color: var(--xfailed-text);
        }

        .status-xpassed {
            background: var(--xpassed-bg);
            color: var(--xpassed-text);
        }

        .status-error {
            background: var(--error-bg);
            color: var(--error-text);
        }

        .test-name {
            flex: 1;
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
            word-break: break-all;
        }

        .test-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Details Section */
        .test-details {
            padding: 0 1rem 1rem 1rem;
            border-top: 1px solid var(--border-color);
            background: var(--surface-muted);
        }

        .detail-section {
            margin-top: 1rem;
        }

        .detail-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .coverage-item {
            font-family: monospace;
            font-size: 0.85rem;
            padding: 0.25rem 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }

        .coverage-list {
            background: var(--card-bg);
            border-radius: 0.375rem;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .source-coverage {
            margin-top: 2rem;
        }

        .source-coverage h2 {
            margin: 0 0 1rem;
            font-size: 1.5rem;
        }

        .source-coverage-table {
            display: grid;
            gap: 0.35rem;
        }

        .source-coverage-header,
        .source-coverage-row {
            display: grid;
            grid-template-columns: minmax(200px, 2fr) repeat(4, minmax(60px, 0.5fr)) minmax(
                    140px,
                    1fr
                ) minmax(140px, 1fr);
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
        }

        .source-coverage-header {
            background: var(--surface-muted);
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--text-secondary);
        }

        .source-coverage-row {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            font-size: 0.85rem;
        }

        .source-path {
            font-family: monospace;
            word-break: break-word;
        }

        .source-lines {
            font-family: monospace;
            color: var(--text-secondary);
            word-break: break-word;
        }

        .llm-annotation {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid var(--border-color);
        }

        .error-message {
            font-family: monospace;
            color: var(--failed-text);
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid var(--failed-bg);
            white-space: pre-wrap;
            overflow-x: auto;
        }

        /* HTML5 Progress Bar for Coverage */
        progress {
            width: 60px;
        }

        /* Utility: Hidden state for filtering */
        .hidden {
            display: none !important;
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #0f172a;
                --text-primary: #f1f5f9;
                --text-secondary: #94a3b8;
                --border-color: #334155;
                --card-bg: #1e293b;
                --surface-muted: #0b1220;
                --primary-color: #60a5fa;

                /* Status Colors - Adjusted for dark mode */
                --passed-bg: #14532d;
                --passed-text: #86efac;
                --failed-bg: #7f1d1d;
                --failed-text: #fca5a5;
                --skipped-bg: #713f12;
                --skipped-text: #fde047;
                --xfailed-bg: #7c2d12;
                --xfailed-text: #fdba74;
                --error-bg: #7f1d1d;
                --error-text: #fca5a5;
            }

            /* Adjust box shadows for dark mode */
            .summary-card {
                box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
            }
        }
    </style>
    <script>
        // pytest-llm-report interactive features

        // Global state for filters
        const activeStatuses = new Set(['passed', 'failed', 'skipped', 'xfailed', 'xpassed', 'error']);

        // Filter tests based on search input and outcome filters
        function filterTests() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.test-row').forEach(row => {
                const nodeid = row.querySelector('.test-name').textContent.toLowerCase();
                const statusMatch = row.dataset.status ? activeStatuses.has(row.dataset.status) : false;
                const matchesSearch = nodeid.includes(query);
                row.classList.toggle('hidden', !matchesSearch || !statusMatch);
            });
        }

        // Toggle visibility of status filters
        function toggleStatus(checkbox) {
            const status = checkbox.dataset.status;
            if (checkbox.checked) {
                activeStatuses.add(status);
            } else {
                activeStatuses.delete(status);
            }
            filterTests();
        }

        // Initialize interactive features after DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            'use strict';

            // Toggle dark mode on preference
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.dataset.theme = 'dark';
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Test Report</h1>
                <div class="meta">
                    Run ID: example-run-2024-09-12 ‚Ä¢
                    Generated: 2024-09-12 14:27:19 ‚Ä¢
                    Duration: 8.42s
                </div>
            </div>
            <div class="coverage-summary">
                <div class="coverage-percentage">
                    93%
                </div>
                <div class="meta">Total Coverage</div>
            </div>
        </header>

        <div class="summary">
            <div class="summary-card">
                <div class="count">6</div>
                <div class="label">Total Tests</div>
            </div>
            <div class="summary-card passed">
                <div class="count">1</div>
                <div class="label">Passed</div>
            </div>
            <div class="summary-card failed">
                <div class="count">1</div>
                <div class="label">Failed</div>
            </div>
            <div class="summary-card skipped">
                <div class="count">1</div>
                <div class="label">Skipped</div>
            </div>
            <div class="summary-card xfailed">
                <div class="count">1</div>
                <div class="label">XFailed</div>
            </div>
            <div class="summary-card xpassed">
                <div class="count">1</div>
                <div class="label">XPassed</div>
            </div>
            <div class="summary-card failed">
                <div class="count">1</div>
                <div class="label">Errors</div>
            </div>
        </div>

        <div class="filters">
            <input type="text" id="searchInput" class="filter-input" placeholder="Search tests..." onkeyup="filterTests()">
            <div class="filter-statuses" aria-label="Filter by status">
                <label class="filter-chip passed">
                    <input type="checkbox" data-status="passed" checked onchange="toggleStatus(this)">
                    Passed
                </label>
                <label class="filter-chip failed">
                    <input type="checkbox" data-status="failed" checked onchange="toggleStatus(this)">
                    Failed
                </label>
                <label class="filter-chip skipped">
                    <input type="checkbox" data-status="skipped" checked onchange="toggleStatus(this)">
                    Skipped
                </label>
                <label class="filter-chip xfailed">
                    <input type="checkbox" data-status="xfailed" checked onchange="toggleStatus(this)">
                    XFailed
                </label>
                <label class="filter-chip xpassed">
                    <input type="checkbox" data-status="xpassed" checked onchange="toggleStatus(this)">
                    XPassed
                </label>
                <label class="filter-chip error">
                    <input type="checkbox" data-status="error" checked onchange="toggleStatus(this)">
                    Error
                </label>
            </div>
        </div>

        <div class="test-list">
            <div class="test-row passed" data-status="passed">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-passed">PASSED</span>
                        <span class="test-name">tests/api/test_users.py::test_create_user_round_trip</span>
                        <div class="test-meta">
                            <span>0.42s</span>
                            <span title="Covered file count">üõ°Ô∏è 2</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">AI Assessment</div>
                            <div class="llm-annotation">
                                <p><strong>Scenario:</strong> Creating a new user returns an ID and persists the record.</p>
                                <p><strong>Why Needed:</strong> Ensures the API workflow maintains data integrity during onboarding.</p>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-title">Coverage</div>
                            <div class="coverage-list">
                                <div class="coverage-item">
                                    <span>src/app/users/service.py</span>
                                    <span class="meta">18 lines (ranges: 12-22, 30-37)</span>
                                </div>
                                <div class="coverage-item">
                                    <span>src/app/users/repository.py</span>
                                    <span class="meta">9 lines (ranges: 5-9, 15-18)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>
            </div>

            <div class="test-row failed" data-status="failed">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-failed">FAILED</span>
                        <span class="test-name">tests/api/test_users.py::test_email_must_be_unique</span>
                        <div class="test-meta">
                            <span>0.31s</span>
                            <span title="Covered file count">üõ°Ô∏è 1</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">Error</div>
                            <div class="error-message">AssertionError: expected unique constraint error
E   assert 'unique constraint' in "duplicate key value violates unique constraint \"users_email_key\""</div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-title">Coverage</div>
                            <div class="coverage-list">
                                <div class="coverage-item" style="padding: 0.5rem 1rem;">
                                    <span>src/app/users/repository.py</span>
                                    <span style="color: var(--text-secondary)">11 lines (ranges: 22-32)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>
            </div>

            <div class="test-row skipped" data-status="skipped">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-skipped">SKIPPED</span>
                        <span class="test-name">tests/api/test_billing.py::test_invoices_require_feature_flag</span>
                        <div class="test-meta">
                            <span>0.01s</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">Error</div>
                            <div class="error-message">Skipped: billing API not enabled in staging</div>
                        </div>
                    </div>
                </details>
            </div>

            <div class="test-row xfailed" data-status="xfailed">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-xfailed">XFAILED</span>
                        <span class="test-name">tests/ui/test_reports.py::test_pdf_export_has_footer</span>
                        <div class="test-meta">
                            <span>1.04s</span>
                            <span title="Covered file count">üõ°Ô∏è 2</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">Error</div>
                            <div class="error-message">XFailed: Known issue with headless chromium rendering in CI</div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-title">Coverage</div>
                            <div class="coverage-list">
                                <div class="coverage-item" style="padding: 0.5rem 1rem;">
                                    <span>src/app/reports/pdf.py</span>
                                    <span style="color: var(--text-secondary)">14 lines (ranges: 44-57)</span>
                                </div>
                                <div class="coverage-item" style="padding: 0.5rem 1rem;">
                                    <span>src/app/reports/templates.py</span>
                                    <span style="color: var(--text-secondary)">6 lines (ranges: 10-15)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>
            </div>

            <div class="test-row xpassed" data-status="xpassed">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-xpassed">XPASSED</span>
                        <span class="test-name">tests/api/test_auth.py::test_refresh_token_legacy_format</span>
                        <div class="test-meta">
                            <span>0.18s</span>
                            <span title="Covered file count">üõ°Ô∏è 1</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">Coverage</div>
                            <div class="coverage-list">
                                <div class="coverage-item" style="padding: 0.5rem 1rem;">
                                    <span>src/app/auth/tokens.py</span>
                                    <span style="color: var(--text-secondary)">7 lines (ranges: 88-94)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>
            </div>

            <div class="test-row error" data-status="error">
                <details>
                    <summary class="test-header">
                        <span class="status-badge status-error">ERROR</span>
                        <span class="test-name">tests/workflows/test_notifications.py::test_sends_digest_email</span>
                        <div class="test-meta">
                            <span>0.09s</span>
                        </div>
                    </summary>
                    <div class="test-details">
                        <div class="detail-section">
                            <div class="detail-title">Error</div>
                            <div class="error-message">E   RuntimeError: SMTP credentials missing
E   Aborting notification workflow</div>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <section class="source-coverage">
            <h2>Source Coverage</h2>
            <div class="source-coverage-table">
                <div class="source-coverage-header">
                    <span>File</span>
                    <span>Stmts</span>
                    <span>Miss</span>
                    <span>Cover</span>
                    <span>%</span>
                    <span>Covered Lines</span>
                    <span>Missed Lines</span>
                </div>
                <div class="source-coverage-row">
                    <span class="source-path">src/app/users/service.py</span>
                    <span>58</span>
                    <span>6</span>
                    <span>52</span>
                    <span>89.66%</span>
                    <span class="source-lines">12-22, 30-41, 50-63</span>
                    <span class="source-lines">23-25, 42-43</span>
                </div>
                <div class="source-coverage-row">
                    <span class="source-path">src/app/users/repository.py</span>
                    <span>40</span>
                    <span>10</span>
                    <span>30</span>
                    <span>75.0%</span>
                    <span class="source-lines">5-18, 22-32</span>
                    <span class="source-lines">33-42</span>
                </div>
                <div class="source-coverage-row">
                    <span class="source-path">src/app/reports/pdf.py</span>
                    <span>28</span>
                    <span>8</span>
                    <span>20</span>
                    <span>71.43%</span>
                    <span class="source-lines">44-57, 60-65</span>
                    <span class="source-lines">66-73</span>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
